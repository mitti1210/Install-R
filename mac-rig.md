# macOS: rig で R をバージョン管理する方法

ターミナルの開き方やコマンドの貼り付け方から丁寧に説明します。

## 0. ターミナルを開く

1. 画面左上の **Finder**（顔のアイコン）をクリックします。\\
2. メニューから **アプリケーション > ユーティリティ** を開き、**ターミナル** をダブルクリックします。\\
   - 検索欄で `ターミナル` と入力しても開けます。\\
3. 黒い画面が開き、ここに文字を入力します。これを **ターミナル（コマンドライン）** と呼びます。\\
   - ここに出てくる命令文をマウスで選択し、`⌘ + C` でコピー、ターミナルで `⌘ + V` で貼り付け、\\
     **Enter キー**を押すと実行できます。

## 1. CPU アーキテクチャの確認

あなたの Mac が Apple シリコン(arm64) か Intel(x86_64) かを確認します。\\
ターミナルに次を貼り付け、Enter を押します。

```bash
uname -m
```

`arm64` なら Apple シリコン、`x86_64` なら Intel です。後の手順で迷ったときの目印になります。

## 2. rig のインストール

**rig** は R のバージョンを簡単に切り替えるための道具です。\\
まだ入っていない場合は次の手順でインストールします。

1. ブラウザで [rig のリリースページ](https://github.com/r-lib/rig/releases) を開きます。\\
2. 一覧の中から最新の `rig-*-macos.pkg` を探し、クリックしてダウンロードします。\\
   - Apple シリコンならファイル名に `arm64`、Intel なら `x86_64` が含まれているものを選びます。\\
3. ダウンロードした `.pkg` ファイルをダブルクリックし、画面の指示に従ってインストールします。\\
4. インストールが終わったらターミナルを一度閉じ、もう一度開きます。

## 3. rig が入ったか確認

```bash
rig --version
```

バージョン番号が表示されれば成功です。

## 4. インストールできる R の一覧を見る

```bash
rig available
```

どのバージョンの R を用意できるかが表示されます。

## 5. 最新の R をインストール

```bash
rig add release
```

`release` は「一番新しい安定版」を意味します。通常はこれだけで十分です。\\
*もし特定のバージョンを入れたい場合だけ* 次のように数字を指定します。

```bash
rig add 4.4.3
```

## 6. インストール済み R を確認

```bash
rig list
```

1つだけ入っているならそのバージョンだけが表示されます。\\
2つ以上入れた場合はここで一覧を確認できます。

## 7. 使う R のバージョンを切り替える

```bash
rig default 4.4.3
```

バージョンを複数入れているときだけ必要な操作です。\\
1つしか入っていないなら何もしなくて大丈夫です。

## 8. RStudio をインストール

**RStudio** は R を使いやすくするアプリです。\\
ブラウザで [RStudio のダウンロードページ](https://posit.co/download/rstudio-desktop/) を開きます。

1. `Download RStudio for Mac` をクリックし、`RStudio.dmg` をダウンロードします。\\
2. ダウンロードした `.dmg` ファイルをダブルクリックし、表示されるウインドウから **RStudio** を **アプリケーション** フォルダにドラッグします。

## 9. RStudio で必要なパッケージを入れる

1. 「アプリケーション」フォルダから RStudio を開きます。\\
2. 画面下部の「Console」と書かれた白い場所に次の2行を順番に貼り付け、Enter を押します。

```r
install.packages("pacman")
pacman::p_load(skimr, comorbidity, broom, tidyverse, here, openxlsx, tableone)
```

これで授業で使う R の準備は完了です。
